var smr=smr||{};!function(t,e,n){e.defineProperty(t,"global",{value:window||global||this,writable:!1,configurable:!1,enumerable:!0});var o=(t.global.Array,t.global.onerror=function(t,e,n,o,i){console.error(i.stack)}),i=function(t,e,n,o,i){alert(i.stack)},s={className:" < noname > ",count:0},r=function(t,e){return e===n&&(e=1),{value:t,enumerable:1===(1&e),writable:2===(2&e),configurable:4===(4&e)}},f=function(){this._classTree[this._initCount++].prototype.init.apply(this,arguments)};e.defineProperty(t,"defineProperty",{value:function(t,n,o){return e.defineProperty(this,t,r(n,o)),this},writable:!1,configurable:!1,enumerable:!0}),t.defineProperty("defineProperties",function(){for(var e=0,n=arguments.length;n>e;)t.defineProperty.call(this,arguments[e++],arguments[e++],arguments[e++]);return this}),t.defineProperty("forin",function(){var t=arguments[0],e=arguments[1],n=arguments.length;if(2===n)for(var o in t)e(o,t[o]);else for(var o in t)arguments[0]=o,arguments[1]=t[o],e.apply(null,arguments)}),t.defineProperty("definePackage",function(e,o,i){"string"==typeof e&&(e=t.using(e));var s=e;i=i===n?1:i;for(var r in o)t.defineProperty.call(s,r,o[r],i);return s}),t.defineProperty("definePackages",function(e,o,i){var s=t.using(e);i=i===n?1:i;for(var r in o)t.definePackage(e+"."+r,o[r],i);return s});var a={_pathSplit:/[\[,\.\/]|::/,_optimize:/[　\s\]]/,optimization:function(t){return t.split(this._optimize).join("")},pathSplitter:function(t){return t.split(this._pathSplit)},classPath:function(t){return this.pathSplitter(this.optimization(t)).join(".")},className:function(t){var e=this.pathSplitter(t);return this.optimization(e[e.length-1])}},u={onerrorAlert:function(){t.global.onerror=i},offerrorAlert:function(){t.global.onerror=o},accessor:function(t,n,o){return e.defineProperty(t,n,{enumerable:!0,configurable:!1,get:o.get,set:o.set}),t},accessors:function(){for(var e=arguments[0],n=1,o=arguments.length;o>n;)t.accessor(e,arguments[n++],arguments[n++]);return e},defineAccessors:function(e,n){for(var o in n)t.accessor(e,o,n[o]);return e},setter:function(t,n,o){return e.defineProperty(t,n,{enumerable:!0,configurable:!1,set:o}),t},defineSetters:function(e,n){for(var o in n)t.setter(e,o,n[o]);return e},getter:function(t,n,o){return e.defineProperty(t,n,{enumerable:!0,configurable:!1,get:o}),t},defineGetters:function(e,n){for(var o in n)t.getter(e,o,n[o]);return e},using:function(e){if(t.classes[e])return t.classes[e];for(var n=a.pathSplitter(a.optimization(e)),o=t.global,i=0,s=n.length;s>i;++i){var r=n[i];o=o[r]||t.defineProperty.call(o,r,{})[r]}return t.defineProperty.call(t.classes,e,o),o},define:function(n,o){var i=!1;"string"!=typeof n&&(o=n,n=!1),n?n=a.classPath(n):(i=!0,n="smr."+s.className+"."+s.count);var u=a.className(n);o.superClass=o.superClass||t.Object,o.init=o.init||function(){},o._initCount=0;for(var c,l={0:o.superClass},h=0;c=l[h].prototype.superClass;)l[++h]=c;o._classTree=l,"string"==typeof o.superClass&&(o.superClass=t.using(o.superClass)),o.superInit=f;var d=function(t){this.init.apply(this,t)},p=function(){return new d(arguments)};if(p.prototype=e.create(o.superClass.prototype,function(){var t={};for(var e in o){var i="function"==typeof o[e];t[e]={value:o[e],writable:!i,enumerable:!i,configurable:!1}}return t._path=r(n,0),t._className=r(u,0),t.constructor=r(p,2),t}()),t.defineProperty.call(p,"_class",!0,0),t.defineProperty.call(d,"_class",!0,0),t.defineProperty.call(p.prototype.init,"owner",p,0),d.prototype=p.prototype,i)t[s.className][s.count++]=p;else{var g=n.substring(0,n.lastIndexOf("."));g=g?t.using(g):t.global,t.defineProperty.call(g,u,p)}return t.defineProperty.call(t.classes,n,p),p}};t.classes={},t[s.className]=[],t.definePackage(t,u),t.definePackage("smr.regexp",a),t.define("smr.Object",{superClass:e,init:function(t){t&&this.add(t)},add:function(t){for(var e in t)this[e]=t[e];return this},addIfNotHave:function(t){for(var e in t)this.has(e)||(this[e]=t[e]);return this},invoke:function(t){"string"==typeof t&&(t=arguments);for(var e=0,n=t.length;n>e;)this[t[e++]].apply(this,t[e++])},forIn:function(t,n){return n=n||this,e.keys(this).forEach(function(e,o){var i=this[e];t.call(n,e,i,o)},this),this},keys:function(){return e.keys(this)},has:function(t){return this.hasOwnProperty(t)},isInstance:function(t){return t instanceof this.constructor}})}(smr,{}.constructor),function(t,e,n,o,i,s){"use strict";var r=e.Array,f=e.NodeList,a=(t.using("smr.dom"),e.document),u=function(t){return i(t.replace("px",""))},c=function(t,e){return t.top<e.bottom&&t.left<e.right&&e.top<t.bottom&&e.left<t.right},l=t.define("smr.dom.Element",{element:null,queryCache:null,queryAllCache:null,displayCache:null,init:function(t){t=t||a,this.element="string"==typeof t?a.createElement(t):t,this.queryAllCache={},this.queryCache={}},setPosition:function(t,e){return this.x=t,this.y=e,this},styleSetter:function(t){return this.add.call(this.style,t),this},elementSetter:function(t){return this.add.call(this.element,t),this},show:function(){return this.visible=!0,this},hide:function(){return this.visible=!1,this},toggle:function(){return this.visible=!this.visible,this},noneDisp:function(){var t=this.style.display;return"none"===t?this:(this.displayCache=t,this.style.display="none",this)},showDisp:function(){return this.style.display=this.displayCache||"",this},isHitElement:function(t){return c(this.element.getBoundingClientRect(),(t.element||t).getBoundingClientRect())},append:function(t){return this.element.appendChild(t.element||t),this},prepend:function(t){return this.element.insertBefore(t.element||t,this.element.firstChild),this},after:function(t){return this.element.parentNode.insertBefore(t.element||t,this.element.nextSibling),this},before:function(t){return this.element.parentNode.insertBefore(t.element||t,this.element),this},appendTo:function(t){return t=t?t.element||t:a.body,t.appendChild(this.element),this},prependTo:function(t){if(t){if(t.prepend)return t.prepend(this),this}else t=a.body;return t.insertBefore(this.element,t.firstChild),this},clone:function(t){return this.constructor(this.element.cloneNode(!t))},remove:function(){return this.element.parentNode.removeChild(this.element),this},removeChild:function(t){if(null===t)return this;if(t instanceof f||t instanceof r)for(var e=this.element,n=t.length-1;n>=0;--n){var o=t[n];e.removeChild(o.element||o)}else this.element.removeChild(t.element||t);return this},removeChildAll:function(){for(var t,e=this.element;t=e.firstChild;)e.removeChild(t);return this},create:function(t,e){var n=l(t);return this[e||"append"](n),n},fixed:function(t,e,n,o){return this.style.position="fixed",t!==s&&(this.x=t),e!==s&&(this.y=e),n!==s&&(this.width=n),o!==s&&(this.height=o),this},absolute:function(t,e,n,o){return this.style.position="absolute",t!==s&&(this.x=t),e!==s&&(this.y=e),n!==s&&(this.width=n),o!==s&&(this.height=o),this},on:function(t,e,n){return this.element.addEventListener(t,e,!!n),this},off:function(t,e,n){return this.element.removeEventListener(t,e,!!n),this},query:function(t,e,n){if(n=n||{getCache:!1,setCache:!0,isWrap:!1},n.getCache=n.getCache===s?!0:n.getCache,n.getCache&&this.queryCache[t+e+n.isWrap])return this.queryCache[t+e+n.isWrap];var o=e?this.element.querySelectorAll(t)[e]:this.element.querySelector(t);return n.isWrap&&(o=l(o)),n.setCache&&(this.queryCache[t+e+n.isWrap]=o),n.method?this[n.method](o):o},queryAll:function(t,e){if(e=e||{getCache:!1,setCache:!0,isWrap:!1},e.getCache=e.getCache===s?!0:e.getCache,e.getCache&&this.queryAllCache[t+e.isWrap])return this.queryAllCache[t+e.isWrap];var n=this.element.querySelectorAll(t);return e.isWrap&&(n=this.wrapList(n)),e.setCache&&(this.queryAllCache[t+e.isWrap]=n),e.method?this[e.method](n):n},wrapList:function(t){for(var e=[],n=t.length-1;n>=0;--n)e[n]=l(t[n]);return e}});t.defineGetters(l.prototype,{classList:function(){return this.element.classList},prev:function(){return this.element.previousSibling?l(this.element.previousSibling):null},next:function(){return this.element.nextSibling?l(this.element.nextSibling):null},style:function(){return this.element.style},children:function(){return this.element.children},parent:function(){return this.element.parentNode?l(this.element.parentNode):null}}),t.defineAccessors(l.prototype,{visible:{set:function(t){this.style.visibility=t===!0?"visible":"hidden"},get:function(){return"hidden"!==this.style.visibility}},html:{set:function(t){this.element.innerHTML=t},get:function(){return this.element.innerHTML}},value:{set:function(t){this.element.value=t},get:function(){return this.element.value}},x:{set:function(t){this.style.left=t+"px"},get:function(){return u(this.style.left)}},y:{set:function(t){this.style.top=t+"px"},get:function(){return u(this.style.top)}},width:{set:function(t){this.style.width=t+"px"},get:function(){return u(this.style.width)}},height:{set:function(t){this.style.height=t+"px"},get:function(){return u(this.style.height)}},color:{set:function(t){this.style.color=t},get:function(){return this.style.color}},backgroundColor:{set:function(t){this.style.backgroundColor=t},get:function(){return this.style.backgroundColor}}}),t.defineSetters(l.prototype,{onunload:function(t){this.on("unload",t)},onstorage:function(t){this.on("storage",t)},onpopstate:function(t){this.on("popstate",t)},onpageshow:function(t){this.on("pageshow",t)},onpagehide:function(t){this.on("pagehide",t)},ononline:function(t){this.on("online",t)},onoffline:function(t){this.on("offline",t)},onmessage:function(t){this.on("message",t)},onlanguagechange:function(t){this.on("languagechange",t)},onhashchange:function(t){this.on("hashchange",t)},onbeforeunload:function(t){this.on("beforeunload",t)},onscroll:function(t){this.on("scroll",t)},onresize:function(t){this.on("resize",t)},onload:function(t){this.on("load",t)},onfocus:function(t){this.on("focus",t)},onerror:function(t){this.on("error",t)},onblur:function(t){this.on("blur",t)},onautocompleteerror:function(t){this.on("autocompleteerror",t)},onautocomplete:function(t){this.on("autocomplete",t)},onwaiting:function(t){this.on("waiting",t)},onvolumechange:function(t){this.on("volumechange",t)},ontoggle:function(t){this.on("toggle",t)},ontimeupdate:function(t){this.on("timeupdate",t)},onsuspend:function(t){this.on("suspend",t)},onsubmit:function(t){this.on("submit",t)},onstalled:function(t){this.on("stalled",t)},onshow:function(t){this.on("show",t)},onselect:function(t){this.on("select",t)},onseeking:function(t){this.on("seeking",t)},onseeked:function(t){this.on("seeked",t)},onreset:function(t){this.on("reset",t)},onratechange:function(t){this.on("ratechange",t)},onprogress:function(t){this.on("progress",t)},onplaying:function(t){this.on("playing",t)},onplay:function(t){this.on("play",t)},onpause:function(t){this.on("pause",t)},onmousewheel:function(t){this.on("mousewheel",t)},onmouseup:function(t){this.on("mouseup",t)},onmouseover:function(t){this.on("mouseover",t)},onmouseout:function(t){this.on("mouseout",t)},onmousemove:function(t){this.on("mousemove",t)},onmouseleave:function(t){this.on("mouseleave",t)},onmouseenter:function(t){this.on("mouseenter",t)},onmousedown:function(t){this.on("mousedown",t)},onloadstart:function(t){this.on("loadstart",t)},onloadedmetadata:function(t){this.on("loadedmetadata",t)},onloadeddata:function(t){this.on("loadeddata",t)},onkeyup:function(t){this.on("keyup",t)},onkeypress:function(t){this.on("keypress",t)},onkeydown:function(t){this.on("keydown",t)},oninvalid:function(t){this.on("invalid",t)},oninput:function(t){this.on("input",t)},onended:function(t){this.on("ended",t)},onemptied:function(t){this.on("emptied",t)},ondurationchange:function(t){this.on("durationchange",t)},ondrop:function(t){this.on("drop",t)},ondragstart:function(t){this.on("dragstart",t)},ondragover:function(t){this.on("dragover",t)},ondragleave:function(t){this.on("dragleave",t)},ondragenter:function(t){this.on("dragenter",t)},ondragend:function(t){this.on("dragend",t)},ondrag:function(t){this.on("drag",t)},ondblclick:function(t){this.on("dblclick",t)},oncuechange:function(t){this.on("cuechange",t)},oncontextmenu:function(t){this.on("contextmenu",t)},onclose:function(t){this.on("close",t)},onclick:function(t){this.on("click",t)},onchange:function(t){this.on("change",t)},oncanplaythrough:function(t){this.on("canplaythrough",t)},oncanplay:function(t){this.on("canplay",t)},oncancel:function(t){this.on("cancel",t)},onabort:function(t){this.on("abort",t)},onwebkitfullscreenerror:function(t){this.on("webkitfullscreenerror",t)},onwebkitfullscreenchange:function(t){this.on("webkitfullscreenchange",t)},onwheel:function(t){this.on("wheel",t)},onselectstart:function(t){this.on("selectstart",t)},onsearch:function(t){this.on("search",t)},onpaste:function(t){this.on("paste",t)},oncut:function(t){this.on("cut",t)},oncopy:function(t){this.on("copy",t)},onbeforepaste:function(t){this.on("beforepaste",t)},onbeforecut:function(t){this.on("beforecut",t)},onbeforecopy:function(t){this.on("beforecopy",t)},offunload:function(t){this.off("unload",t)},offstorage:function(t){this.off("storage",t)},offpopstate:function(t){this.off("popstate",t)},offpageshow:function(t){this.off("pageshow",t)},offpagehide:function(t){this.off("pagehide",t)},offonline:function(t){this.off("online",t)},offoffline:function(t){this.off("offline",t)},offmessage:function(t){this.off("message",t)},offlanguagechange:function(t){this.off("languagechange",t)},offhashchange:function(t){this.off("hashchange",t)},offbeforeunload:function(t){this.off("beforeunload",t)},offscroll:function(t){this.off("scroll",t)},offresize:function(t){this.off("resize",t)},offload:function(t){this.off("load",t)},offfocus:function(t){this.off("focus",t)},offerror:function(t){this.off("error",t)},offblur:function(t){this.off("blur",t)},offautocompleteerror:function(t){this.off("autocompleteerror",t)},offautocomplete:function(t){this.off("autocomplete",t)},offwaiting:function(t){this.off("waiting",t)},offvolumechange:function(t){this.off("volumechange",t)},offtoggle:function(t){this.off("toggle",t)},offtimeupdate:function(t){this.off("timeupdate",t)},offsuspend:function(t){this.off("suspend",t)},offsubmit:function(t){this.off("submit",t)},offstalled:function(t){this.off("stalled",t)},offshow:function(t){this.off("show",t)},offselect:function(t){this.off("select",t)},offseeking:function(t){this.off("seeking",t)},offseeked:function(t){this.off("seeked",t)},offreset:function(t){this.off("reset",t)},offratechange:function(t){this.off("ratechange",t)},offprogress:function(t){this.off("progress",t)},offplaying:function(t){this.off("playing",t)},offplay:function(t){this.off("play",t)},offpause:function(t){this.off("pause",t)},offmousewheel:function(t){this.off("mousewheel",t)},offmouseup:function(t){this.off("mouseup",t)},offmouseover:function(t){this.off("mouseover",t)},offmouseout:function(t){this.off("mouseout",t)},offmousemove:function(t){this.off("mousemove",t)},offmouseleave:function(t){this.off("mouseleave",t)},offmouseenter:function(t){this.off("mouseenter",t)},offmousedown:function(t){this.off("mousedown",t)},offloadstart:function(t){this.off("loadstart",t)},offloadedmetadata:function(t){this.off("loadedmetadata",t)},offloadeddata:function(t){this.off("loadeddata",t)},offkeyup:function(t){this.off("keyup",t)},offkeypress:function(t){this.off("keypress",t)},offkeydown:function(t){this.off("keydown",t)},offinvalid:function(t){this.off("invalid",t)},offinput:function(t){this.off("input",t)},offended:function(t){this.off("ended",t)},offemptied:function(t){this.off("emptied",t)},offdurationchange:function(t){this.off("durationchange",t)},offdrop:function(t){this.off("drop",t)},offdragstart:function(t){this.off("dragstart",t)},offdragover:function(t){this.off("dragover",t)},offdragleave:function(t){this.off("dragleave",t)},offdragenter:function(t){this.off("dragenter",t)},offdragend:function(t){this.off("dragend",t)},offdrag:function(t){this.off("drag",t)},offdblclick:function(t){this.off("dblclick",t)},offcuechange:function(t){this.off("cuechange",t)},offcontextmenu:function(t){this.off("contextmenu",t)},offclose:function(t){this.off("close",t)},offclick:function(t){this.off("click",t)},offchange:function(t){this.off("change",t)},offcanplaythrough:function(t){this.off("canplaythrough",t)},offcanplay:function(t){this.off("canplay",t)},offcancel:function(t){this.off("cancel",t)},offabort:function(t){this.off("abort",t)},offwebkitfullscreenerror:function(t){this.off("webkitfullscreenerror",t)},offwebkitfullscreenchange:function(t){this.off("webkitfullscreenchange",t)},offwheel:function(t){this.off("wheel",t)},offselectstart:function(t){this.off("selectstart",t)},offsearch:function(t){this.off("search",t)},offpaste:function(t){this.off("paste",t)},offcut:function(t){this.off("cut",t)},offcopy:function(t){this.off("copy",t)},offbeforepaste:function(t){this.off("beforepaste",t)},offbeforecut:function(t){this.off("beforecut",t)},offbeforecopy:function(t){this.off("beforecopy",t)}});var h=function(){var t=this.style;t.height="0px";var e,n=this.scrollHeight;n-=(e=t.paddingTop)?u(e):2,n-=(e=t.paddingBottom)?u(e):2,n-=(e=t.borderWidth)?2*u(e):2,t.height=n+"px"},d=(t.define("smr.dom.Textarea",{superClass:l,init:function(t){t=t||"textarea",this.superInit(t),t instanceof o||this.styleSetter({resize:"none",overflow:"hidden",padding:"2px",minHeight:"14px",wordWrap:"break-word",borderWidth:"1px"})},resize:function(t){return this.style.resize=t===s?"":t===!0?"":t===!1?"none":"v"===t?"vertical":"y"===t?"vertical":"h"===t?"horizontal":"x"===t?"horizontal":"vertical"===t?"vertical":"horizontal"===t?"horizontal":""===t?"":"none"===t?"none":"",this},autoResize:function(t){return t?void this.off("input",h):(this.on("input",h),this)}}),t.define("smr.dom.Form",{superClass:l,init:function(t,e){t=t||"form",this.superInit(t),e&&this.elementSetter(e)}}));t.accessors(d.prototype,"elements",{get:function(){return this.element.elements}})}(smr,smr.global,smr.Object,{}.constructor,Number),function(t){"use strict";var e="=",n="&",o=t.global,i=o.encodeURIComponent,s={};s.queryString={stringify:function(t,o,s){o=o||e,s=s||n;var r=[];for(var f in t)r[r.length]=i(f)+o+i(t[f]);return r.join(s)},encodeURINonEqual:function(t){for(var n=t.split(e),o=0,s=n.length;s>o;++o)n[o]=i(n[o]);return n.join(e)},parse:function(){alert("smr.util.parse:あとで作る")}},t.definePackages("smr.util",s)}(smr),function(smr,undefined){"use strict";var global=smr.global,DOMParser=global.DOMParser,JSON=global.JSON,XMLHttpRequest=global.XMLHttpRequest,CALLBACK="callback",callbackName="smr.callbackFunctions",callbackCount=0,head=null,callbackFunctions=[];smr.defineProperty("callbackFunctions",callbackFunctions);var FormData=global.FormData,DEFAULT_PARAMS={type:"GET",async:!0,data:null,contentType:"application/x-www-form-urlencoded",charset:null,dataType:"text",responseType:null,username:null,password:null,success:function(t){alert("success!!\n"+t)},error:function(){alert("error!!")},beforeSend:null},NOT_PARSE=function(t){return t},PARSER_TABLE={undefined:NOT_PARSE,"":NOT_PARSE,text:NOT_PARSE,xml:function(t){return(new DOMParser).parseFromString(t,"text/xml")},dom:function(t){var e=smr.dom.Element("div");return e.html=t,e},json:function(t){try{return JSON.parse(t)}catch(e){console.dir(e),console.dir(t)}},script:function(data){return eval(data),data},bin:function(t){for(var e=[],n=0,o=t.length;o>n;++n)e[n]=255&t.charCodeAt(n);return e}},ajax={load:function(t){for(var e in DEFAULT_PARAMS)t[e]=t[e]===undefined?DEFAULT_PARAMS[e]:t[e];var n=new XMLHttpRequest,o=PARSER_TABLE[t.dataType];t.charset&&(t.contentType+=";charset="+t.charset);var i=t.type=t.type.toUpperCase();if(t.data){var s=t.data;t.data=null;var r="";r="string"==typeof s?smr.util.queryString.encodeURINonEqual(s):s instanceof FormData?s:smr.util.queryString.stringify(s),"GET"===i?t.url+="?"+r:"POST"===i&&(t.data=r)}n.open(i,t.url,t.async,t.username,t.password),"POST"!==i||t.data instanceof FormData||n.setRequestHeader("Content-Type",t.contentType),t.responseType&&(n.responseType=t.responseType),t.beforeSend&&t.beforeSend(n),t.password&&(n.withCredentials=!0),n.onreadystatechange=function(){if(4===n.readyState){var e=n.status;if(200===e||201===e||0===e)if("arraybuffer"!==n.responseType&&"blob"!==n.responseType){var i=o(n.responseText);t.success(i)}else t.success(n.response);else t.error(n.responseText)}},n.send(t.data)},loadJSONP:function(t,e,n){n=n||CALLBACK,callbackFunctions[callbackCount]=e;var o=callbackName+"["+callbackCount+"]";++callbackCount,t+=(-1===t.indexOf("?")?"?":"&")+n+"="+o,head||(head=global.document.head);var i=smr.dom.Element("script").elementSetter({type:"text/javascript",charset:"UTF-8",src:t});i.element.setAttribute("defer",!0),i.appendTo(head)}};smr.definePackage("smr.ajax",ajax)}(smr);var vg=vg||{};!function(t,e,n){t.ajax=function(n,o,i,s,r){e.ajax.load({type:s?"get":"post",async:!r,dataType:"json",data:o,url:t.path+"/s/"+n,success:i})},window.addEventListener("load",function(){var n=e.dom.Element("div").styleSetter({fontSize:"1.5em"});t.appendLoading=function(t){n.styleSetter({position:"absolute",width:"100%",left:"0px",top:~~innerHeight/2+pageYOffset+"px",textAlign:"center"}).appendTo().element.textContent=t},t.removeLoading=function(){n.remove()}}),t.getAjax={GET:"get.json",RANK:"ranking.json",gameup:function(n){n=n||this,n.style.visibility="hidden",t.appendLoading("投稿しています。しばらくお待ちください。"),t.ajax("gameup.json",new FormData(n),function(o){"success"===o.status?(document.body.style.visibility="hidden",e.global.location.href=o.url):(n.style.visibility="visible",t.removeLoading(),alert(o.text))},!1)},gameList:function(e,o){o===n&&(o=""),t.ajax(this.GET,{key:"0",userid:o},function(t){"success"===t.status?e(t.text):alert(t.text)},!0)},gameImage:function(e,n){t.ajax(this.GET,{key:"1",gameid:n},function(t){"success"===t.status?e(t.text):alert(t.text)})},game:function(e,n){t.ajax(this.GET,{key:"2",gameid:n},function(t){"success"===t.status?e(t.text):alert(t.text)})},initRank:function(t,e){this.sendScore(t,"-1",e)},sendScore:function(e,o,i){i=i===n?t.game.id:i,o=o===n?"-1":o,e=e||function(){},t.ajax(this.RANK,{key:0,score:o,gameid:i},function(t){"success"===t.status?e(t.text):alert(t.text)})},getRanking:function(e,o){o=o===n?t.game.id:o,e=e||function(){},t.ajax(this.RANK,{key:1,gameid:o},function(t){"success"===t.status?(t.top=t.top||[],t.current=t.current||null,t.current="-1"===t.current?null:t.current,e(t.top,t.current)):alert(t.text)})},setumei:function(e,o){o=o===n?t.game.id:o,e=e||function(){},t.ajax(this.GET,{key:3,gameid:o},function(t){"success"===t.status?e(t.text):alert(t.text)})},search:function(e,n,o){e=e||function(){},t.ajax(this.GET,{key:4,query:n,genreid:o},function(t){"success"===t.status?e(t.text):alert(t.text)})},save:function(e,o,i){return i=i===n?t.game.id:i,i===n?console.error("gamaeIdが見つかりません"):(o=o||function(){},void t.ajax(this.GET,{key:5,gameid:i,data:JSON.stringify(e)},function(t){"success"===t.status?o(t.text):alert(t.text)}))},load:function(e,o){return o=o===n?t.game.id:o,o===n?console.error("gamaeIdが見つかりません"):(e=e||function(){},void t.ajax(this.GET,{key:6,gameid:o},function(t){if("success"===t.status){try{t.data=JSON.parse(t.data)}catch(n){console.error(n)}var o={login:t.login,data:"undefined"!==t.data?t.data:null};e(o)}else alert(t.text)}))}},t.path="/vgames",t.setGameId=function(){t.game=t.game||{},t.game.id=location.pathname.match(/\/[0-9]+\//)[0].slice(1,-1)}}(vg,smr);