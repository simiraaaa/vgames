<div class="dbody">
  <div class="dbodyin">


    <div id="user"></div>
    <a id="up">ゲームを投稿する</a>
    <br>
    <a id="edit">ゲームを編集する</a>
    <div style="font-size:1.5em; text-align:center;">
      投稿したゲーム一覧
    </div>
    <div id="gamelist">

    </div>
  </div>
</div>
<script type="text/javascript">
  (function(d) {
    d.g = d.getElementById;
    d.g("user").textContent = "ようこそ" + vg.user.name + "さん";
    d.g("up").href = vg.path + "/s/upload.html";
    d.g("edit").href = vg.path + "/s/edit.html";
  })(document);

  (function(smr, vg, undefined) {
    var Element = smr.dom.Element;
    var glist = Element(document.getElementById("gamelist"));
    var gamepath = vg.path + "/s/play.html?gameid=";
    vg.getAjax.gameList(function(list) {
      list.forEach(function(gdata) {
        var div = Element("div").styleSetter({
          cssFloat: "left",
          margin: "5px",
          width: "250px",
          height: "250px",
          background: "#eee",
          borderBottom: "1px solid gray",
          borderRight: "1px solid gray",
          borderRadius: "10px"
        });
        var a = div
          .create("a")
          .elementSetter({
            href: gamepath + gdata.gid
          }).styleSetter({
            width: "100%",
            height: "100%",
            position: "relative",
            margin: "auto"
          });
        a.create("div")
          .styleSetter({
            position: "relative",
            margin: "auto",
            width: "250px",
            height: "220px"
          })
          .create("img").styleSetter({
            margin: "auto",
            maxHeight: "200px",
            maxWidth: "200px",
            position: "absolute",
            left: "0",
            right: "0",
            top: "0",
            bottom: "0",
          }).elementSetter({
            src: vg.path + "/games/" + gdata.gimage
          });
        a.create("div")
          .styleSetter({
            width: "250px",
            position: "relative",
            top: "5px",
            textAlign: "center"
          }).element.textContent = gdata.gname;
        glist.append(div);

      });
    }, vg.user.id);

  })(smr, vg);
</script>
